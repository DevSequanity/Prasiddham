---
import Layout from "./Layout.astro";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
import BlogSidebar from "../components/BlogSidebar.astro";

export interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { Content } = await post.render();

// Get all posts for sidebar
const allPosts = await getCollection("blog");
---

<Layout>
  <div class="max-w-7xl mx-auto px-16 py-12 pt-24 md:pt-[100px]">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-12">
      <!-- Main Content -->
      <article class="lg:col-span-3">
    <!-- Blog Header -->
    <header class="mb-12 text-center">
      <div class="mb-4">
        <span class="text-orange-600 font-semibold">
          {new Date(post.data.pubDate).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })}
        </span>
        {post.data.tags && (
          <div class="flex flex-wrap justify-center gap-2 mt-4">
            {post.data.tags.map((tag) => (
              <span class="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-medium">
                {tag}
              </span>
            ))}
          </div>
        )}
      </div>
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
        {post.data.title}
      </h1>
      {post.data.description && (
        <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
          {post.data.description}
        </p>
      )}
      {post.data.author && (
        <div class="flex items-center justify-center mt-6">
          <div class="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-400 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">
            {post.data.author.charAt(0).toUpperCase()}
          </div>
          <div>
            <p class="font-semibold text-gray-900">{post.data.author}</p>
            <p class="text-gray-600 text-sm">Interior Design Expert</p>
          </div>
        </div>
      )}
    </header>

    <!-- Blog Content -->
    <div class="prose prose-lg max-w-none prose-headings:text-gray-900 prose-headings:font-bold prose-h1:text-3xl prose-h2:text-2xl prose-h3:text-xl prose-p:text-gray-700 prose-p:leading-relaxed prose-a:text-orange-600 prose-a:no-underline hover:prose-a:underline prose-strong:text-gray-900 prose-blockquote:border-l-orange-500 prose-blockquote:bg-orange-50 prose-blockquote:py-2 prose-blockquote:px-4 prose-code:bg-gray-100 prose-code:text-gray-800 prose-pre:bg-gray-900 prose-pre:text-gray-100">
      <Content />
    </div>

    <!-- Blog Footer -->
    <footer class="mt-12 pt-8 border-t border-gray-200">
      <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
        <div class="flex items-center space-x-4">
          <span class="text-gray-600">Share this post:</span>
          <a href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(post.data.title)}&url=${encodeURIComponent(Astro.url)}`} class="text-orange-600 hover:text-orange-700">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
            </svg>
          </a>
          <a href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Astro.url)}`} class="text-orange-600 hover:text-orange-700">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
          </a>
        </div>
        <a href="/blog" class="text-orange-600 hover:text-orange-700 font-semibold">
          ‚Üê Back to Blog
        </a>
      </div>
    </footer>
      </article>

      <!-- Sidebar -->
      <aside class="lg:col-span-1">
        <BlogSidebar currentPost={post} allPosts={allPosts} />
      </aside>
    </div>
  </div>
</Layout>
<style>
  /* Fallback Markdown styles if Tailwind Typography isn't active */
  .prose {
    color: #374151;
    line-height: 1.75;
  }
  .prose h1 { font-size: 2rem; line-height: 1.2; margin: 1.5rem 0 1rem; font-weight: 800; color: #111827; }
  .prose h2 { font-size: 1.5rem; line-height: 1.3; margin: 1.25rem 0 0.75rem; font-weight: 700; color: #111827; }
  .prose h3 { font-size: 1.25rem; line-height: 1.4; margin: 1rem 0 0.5rem; font-weight: 700; color: #111827; }
  .prose p { margin: 1rem 0; }
  .prose a { color: #ea580c; text-decoration: none; }
  .prose a:hover { text-decoration: underline; }
  .prose ul { list-style: disc; padding-left: 1.5rem; margin: 1rem 0; }
  .prose ol { list-style: decimal; padding-left: 1.5rem; margin: 1rem 0; }
  .prose blockquote {
    border-left: 4px solid #f97316; background: #fff7ed; padding: 0.5rem 1rem; margin: 1rem 0;
  }
  .prose code { background: #f3f4f6; color: #1f2937; padding: 0.125rem 0.375rem; border-radius: 0.25rem; }
  .prose pre { background: #111827; color: #f3f4f6; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
  .prose img { max-width: 100%; height: auto; border-radius: 0.5rem; }
  .prose table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
  .prose th, .prose td { border: 1px solid #e5e7eb; padding: 0.5rem; }
  .prose th { background: #f9fafb; font-weight: 600; }
  .prose hr { border: 0; border-top: 1px solid #e5e7eb; margin: 2rem 0; }
</style>

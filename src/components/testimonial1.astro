---
import {Image} from 'astro:assets';
const testimonials = [
  {
    name: "Jagdish Patel",
    role: "Homeowner, Ahmedabad",
    image:
      "https://images.unsplash.com/photo-1618926749434-0578ceecdfab?q=80&w=764&auto=format&fit=crop",
    quote:
      "Prasiddham transformed our 3BHK apartment into a dream home! Their attention to detail and innovative design solutions exceeded our expectations. The execution was flawless and completed right on schedule.",
  },
  {
    name: "Pooja Mehta",
    role: "Business Owner, Corporate Office",
    image:
      "https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?q=80&w=1727&auto=format&fit=crop",
    quote:
      "The Prasiddham team delivered an exceptional office interior that perfectly reflects our brand identity. Their professional execution and quality craftsmanship have created a productive and inspiring workspace for our team.",
  },
  {
    name: "Akhil Sharma",
    role: "Restaurant Owner, Fine Dining",
    image:
      "https://images.unsplash.com/photo-1669277752825-d7c26a392b4d?q=80&w=2576&auto=format&fit=crop",
    quote:
      "Prasiddham's interior design expertise brought our restaurant vision to life! The elegant execution, premium materials, and perfect lighting create an unforgettable dining experience. Our customers love the ambiance!",
  },
];
---

<style>
  .carousel {
    position: relative;
    overflow: hidden;
    max-width: 900px;
    margin: auto;
  }

  .carousel-track {
    display: flex;
    transition: transform 0.5s ease-in-out;
  }

  .carousel-card {
    flex: 0 0 100%;
    box-sizing: border-box;
    padding: 1rem;
  }

  .carousel-buttons {
    position: absolute;
    top: 50%;
    width: 100%;
    display: flex;
    justify-content: space-between;
    transform: translateY(-50%);
  }

  button {
    background: rgba(255, 255, 255, 0.7);
    border: none;
    padding: 0.5rem 1rem;
    cursor: pointer;
    font-weight: bold;
  }
</style>

<section class="py-16 bg-gradient-to-br from-gray-50 to-white">
  <div class="text-center mb-12">
    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
      What Our Clients Say
    </h2>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto">
      Don't just take our word for it - hear from the amazing people we've
      worked with
    </p>
  </div>

  <div class="carousel">
    <div class="carousel-track" id="track">
      {
        testimonials.map((t) => (
          <div class="carousel-card bg-white rounded-xl shadow-lg">
            <div class="flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-10">
              <div class="flex flex-col items-center md:items-center flex-shrink-0">
                <Image
                  src={t.image}
                  alt={t.name}
                  class="w-28 h-28 md:w-36 md:h-36 rounded-full object-cover shadow-lg ring-4 ring-amber-200 mb-3"
                  width={144}
                  height={144}
                  quality={70}
                  format="webp"
                />
                <h3 class="text-xl font-bold text-center">{t.name}</h3>
                <p class="text-amber-600 text-center">{t.role}</p>
              </div>
              <div class="flex-1 flex items-center md:items-start min-w-0">
                <p
                  class="mb-0 text-lg italic text-center md:text-left break-words w-full"
                  style="word-break:break-word;"
                >
                  "{t.quote}"
                </p>
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <div class="carousel-buttons">
      <button id="prev">❮</button>
      <button id="next">❯</button>
    </div>
  </div>
</section>

<script type="module">
  let index = 0;
  let track, cards, total;

  function updateCarousel() {
    if (!track) return;
    track.style.transform = `translateX(-${index * 100}%)`;
  }

  function next() {
    index = (index + 1) % total;
    updateCarousel();
  }

  function prev() {
    index = (index - 1 + total) % total;
    updateCarousel();
  }

  window.addEventListener("DOMContentLoaded", () => {
    track = document.getElementById("track");
    cards = document.querySelectorAll(".carousel-card");
    total = cards.length;
    updateCarousel();
    document.getElementById("next").addEventListener("click", next);
    document.getElementById("prev").addEventListener("click", prev);
    setInterval(next, 5000); // Auto-rotate every 5 seconds
  });
</script>
